# 18. μ• λ…Έν…μ΄μ… (Annotation)

## κΈ°λ³Έ μ• λ…Έν…μ΄μ… (`@Override`, `@Deprecated`, `@SuppressWarnings`)

### β… 1. `@Override`

#### π“ μ •μ

- λ¶€λ¨ ν΄λμ¤ λλ” μΈν„°νμ΄μ¤μ **λ©”μ„λ“λ¥Ό μ¤λ²„λΌμ΄λ“**(μ¬μ •μ)ν•  λ• μ‚¬μ©
- μ»΄νμΌλ¬μ—κ² "μ΄ λ©”μ„λ“λ” μ¤λ²„λΌμ΄λ”©ν• κ²ƒμ…λ‹λ‹¤"λΌκ³  λ…μ‹

#### π“ μ—­ν• 

- μ¤νƒ€λ‚ λ©”μ„λ“ μ‹κ·Έλ‹μ²κ°€ λ‹¤λ¥Ό κ²½μ° **μ»΄νμΌ μ¤λ¥ λ°μƒ** β†’ μ‹¤μλ¥Ό λ°©μ§€

#### π“ μμ 

```
class Parent {
    void greet() {
        System.out.println("Hello from parent");
    }
}

class Child extends Parent {
    @Override
    void greet() {
        System.out.println("Hello from child");
    }

    // @Override // μ»΄νμΌ μ—λ¬ (λ©”μ„λ“ μ΄λ¦„ ν‹€λ¦Ό)
    // void great() {}
}
```

------

### β… 2. `@Deprecated`

#### π“ μ •μ

- ν•΄λ‹Ή μ”μ†(ν΄λμ¤, λ©”μ„λ“, ν•„λ“ λ“±)λ” **λ” μ΄μƒ μ‚¬μ©μ„ κ¶μ¥ν•μ§€ μ•μ**μ„ μλ―Έ
- **ν•μ„ νΈν™**μ„ μ„ν•΄ λ‚¨κ²¨λ‘λ, μƒ APIλ΅ κµμ²΄ν•  μμ •μ΄λΌλ” ννΈ μ κ³µ

#### π“ μ»΄νμΌλ¬ κ²½κ³ 

- μ‚¬μ© μ‹ κ²½κ³  ν‘μ‹λ¨ β†’ κ°λ°μκ°€ μƒλ΅μ΄ APIλ΅ μ „ν™ν•  μ μλ„λ΅ μ λ„

#### π“ μμ 

```
@Deprecated
class OldCalculator {
    public int add(int a, int b) {
        return a + b;
    }
}

class Test {
    public static void main(String[] args) {
        OldCalculator calc = new OldCalculator(); // κ²½κ³  λ°μƒ
        calc.add(1, 2);
    }
}
```

#### π“ `@Deprecated` + JavaDoc ν™μ©

```
/**
 * @deprecated Use {@link NewCalculator} instead.
 */
@Deprecated
public class OldCalculator { ... }
```

------

### β… 3. `@SuppressWarnings`

#### π“ μ •μ

- μ»΄νμΌλ¬μ **νΉμ • κ²½κ³  λ©”μ‹μ§€λ¥Ό λ¬΄μ‹**ν•λ„λ΅ μ§€μ‹
- μ μ•κ³  μ‚¬μ©ν•λ” μ½”λ“μ— λ€ν•΄ **λ¶ν•„μ”ν• κ²½κ³ λ¥Ό μ–µμ **ν•λ” μ©λ„

#### π“ μ‚¬μ© κ°€λ¥ν• κ²½κ³  νƒ€μ… μμ‹

| κ²½κ³  ν‚¤μ›λ“     | μλ―Έ                                    |
| --------------- | --------------------------------------- |
| `"unchecked"`   | μ λ„¤λ¦­ νƒ€μ… κ²€μ‚¬ μ–µμ                    |
| `"deprecation"` | `@Deprecated` API μ‚¬μ© κ²½κ³  μ–µμ         |
| `"rawtypes"`    | μ›μ‹ νƒ€μ… μ‚¬μ© κ²½κ³  μ–µμ                 |
| `"unused"`      | μ‚¬μ©ν•μ§€ μ•λ” λ³€μ, λ©”μ„λ“ λ“± κ²½κ³  μ–µμ  |

#### π“ μμ 

```
@SuppressWarnings("deprecation")
public void test() {
    OldCalculator calc = new OldCalculator(); // κ²½κ³  λ¬΄μ‹λ¨
    calc.add(1, 2);
}

@SuppressWarnings({"unchecked", "rawtypes"})
public void rawTypeTest() {
    List list = new ArrayList(); // κ²½κ³  μ—†μ΄ μ‚¬μ© κ°€λ¥
}
```

------

### π§  μ”μ•½ μ •λ¦¬ν‘

| μ• λ…Έν…μ΄μ…          | μ©λ„                    | νΉμ§•                                                  |
| ------------------- | ----------------------- | ----------------------------------------------------- |
| `@Override`         | μ¤λ²„λΌμ΄λ”©μ„ λ…μ‹       | μ‹¤μ λ°©μ§€ (μ¤νƒ€, μ‹κ·Έλ‹μ² μ¤λ¥)                       |
| `@Deprecated`       | μ‚¬μ© μ¤‘λ‹¨ μμ • API ν‘μ‹ | μ‚¬μ© μ‹ κ²½κ³  λ°μƒ                                     |
| `@SuppressWarnings` | μ»΄νμΌλ¬ κ²½κ³  μ–µμ       | `"unchecked"`, `"deprecation"` λ“± κ²½κ³  μ½”λ“ λ…μ‹ ν•„μ” |

## μ‚¬μ©μ μ •μ μ• λ…Έν…μ΄μ…

### β… μ‚¬μ©μ μ •μ μ• λ…Έν…μ΄μ…μ΄λ€?

- Javaμ—μ„ `@interface` ν‚¤μ›λ“λ¥Ό μ‚¬μ©ν•΄ μƒ μ• λ…Έν…μ΄μ…μ„ μ •μν•  μ μμ
- μ»΄νμΌλ¬, λ°νƒ€μ„ λλ” μ–΄λ…Έν…μ΄μ… μ²λ¦¬κΈ°(annotation processor)μ—μ„ μ‚¬μ© κ°€λ¥
- λ³΄ν†µ λ¦¬ν”λ ‰μ…(Reflection)κ³Ό ν•¨κ» λ™μ‘ν•μ—¬, μ½”λ“ μ‹¤ν–‰ μ¤‘μ— λ©”νƒ€λ°μ΄ν„°λ΅ ν™μ©λ¨

------

### β… κΈ°λ³Έ ν•μ‹

```
import java.lang.annotation.*;

@Retention(RetentionPolicy.RUNTIME) // μ μ§€ μ •μ±…
@Target(ElementType.METHOD)         // μ μ© λ€μƒ

public @interface MyAnnotation {
    String value();
    int count() default 1; // κΈ°λ³Έκ°’ μ„¤μ •
}
```

------

### π”Ή μ£Όμ” λ©”νƒ€ μ• λ…Έν…μ΄μ… (μ• λ…Έν…μ΄μ…μ„ μ„ν• μ• λ…Έν…μ΄μ…)

| λ©”νƒ€ μ• λ…Έν…μ΄μ… | μ„¤λ…                                                         |
| --------------- | ------------------------------------------------------------ |
| `@Retention`    | μ–΄λ…Έν…μ΄μ… μ •λ³΄μ μ μ§€ λ²”μ„ μ„¤μ • (`SOURCE`, `CLASS`, `RUNTIME`) |
| `@Target`       | μ μ© λ€μƒ μ„¤μ • (`TYPE`, `METHOD`, `FIELD`, `PARAMETER` λ“±)   |
| `@Documented`   | JavaDocμ— ν¬ν•¨ μ—¬λ¶€                                          |
| `@Inherited`    | μμ‹ ν΄λμ¤μ— μλ™ μƒμ† μ—¬λ¶€                                 |

------

#### π”Έ `@Retention` μ •μ±… μΆ…λ¥

| κ°’        | μ„¤λ…                                                    |
| --------- | ------------------------------------------------------- |
| `SOURCE`  | μ»΄νμΌ μ‹ μ κ±°λ¨ (μ• λ…Έν…μ΄μ… μ²λ¦¬κΈ°μ—λ§ μ‚¬μ©λ¨)         |
| `CLASS`   | ν΄λμ¤ νμΌκΉμ§€ μ μ§€, JVMμ—μ„λ” λ¬΄μ‹λ¨                  |
| `RUNTIME` | JVM μ‹¤ν–‰ μ¤‘μ—λ„ λ¦¬ν”λ ‰μ…μΌλ΅ μ ‘κ·Ό κ°€λ¥ β†’ κ°€μ¥ μμ£Ό μ‚¬μ© |

------

#### π”Έ `@Target` λ€μƒ μΆ…λ¥

| λ€μƒ              | μ„¤λ…                                   |
| ----------------- | -------------------------------------- |
| `TYPE`            | ν΄λμ¤, μΈν„°νμ΄μ¤, μ—΄κ±°ν•, μ• λ…Έν…μ΄μ… |
| `METHOD`          | λ©”μ„λ“                                 |
| `FIELD`           | λ©¤λ²„ λ³€μ                              |
| `PARAMETER`       | λ©”μ„λ“ λ§¤κ°λ³€μ                        |
| `CONSTRUCTOR`     | μƒμ„±μ                                 |
| `LOCAL_VARIABLE`  | μ§€μ—­ λ³€μ                              |
| `ANNOTATION_TYPE` | μ• λ…Έν…μ΄μ… μ •μ μμ²΄                   |

------

### β… μμ : μ‚¬μ©μ μ •μ μ• λ…Έν…μ΄μ… μ„ μ–Έκ³Ό μ‚¬μ©

#### 1. μ• λ…Έν…μ΄μ… μ •μ

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface MyLog {
    String value() default "DEFAULT";
}
```

#### 2. μ• λ…Έν…μ΄μ… μ‚¬μ©

```
public class TestClass {
    @MyLog("λ΅κ·Έ μ°κΈ°μ©")
    public void doSomething() {
        System.out.println("Hello!");
    }
}
```

#### 3. λ¦¬ν”λ ‰μ…μ„ ν†µν• μ• λ…Έν…μ΄μ… μ²λ¦¬

```
import java.lang.reflect.Method;

public class Processor {
    public static void main(String[] args) throws Exception {
        Class<?> clazz = TestClass.class;

        for (Method m : clazz.getDeclaredMethods()) {
            if (m.isAnnotationPresent(MyLog.class)) {
                MyLog log = m.getAnnotation(MyLog.class);
                System.out.println("λ©”μ„λ“: " + m.getName() + ", λ΅κ·Έ: " + log.value());
                m.invoke(new TestClass()); // λ©”μ„λ“ μ‹¤ν–‰
            }
        }
    }
}
```

π§  μ‹¤ν–‰ κ²°κ³Ό:

```
λ©”μ„λ“: doSomething, λ΅κ·Έ: λ΅κ·Έ μ°κΈ°μ©
Hello!
```

------

### β… λ‹¤μ–‘ν• μ”μ† νƒ€μ…

```
public @interface MyData {
    String name();
    int age();
    String[] tags() default {};
}
```

------

### β… μ¤‘μ²© μ• λ…Έν…μ΄μ…

```
public @interface Container {
    Repeat[] value();
}

@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
@Repeatable(Container.class)
public @interface Repeat {
    String task();
}
```

β†’ `@Repeat`μ„ μ—¬λ¬ λ² λ¶™μ΄λ©΄ `@Container`μ— λ¬¶μΈλ‹¤

------

### π§  μ”μ•½ μ •λ¦¬ν‘

| κ°λ…                  | μ„¤λ…                                                         |
| --------------------- | ------------------------------------------------------------ |
| `@interface`          | μ‚¬μ©μ μ •μ μ• λ…Έν…μ΄μ… μ •μ ν‚¤μ›λ“                           |
| `@Retention(RUNTIME)` | μ‹¤ν–‰ μ¤‘μ—λ„ μ μ§€λμ–΄ λ¦¬ν”λ ‰μ… κ°€λ¥                           |
| `@Target(...)`        | μ• λ…Έν…μ΄μ…μ΄ μ μ©λ  μ μλ” μ„μΉ                             |
| κΈ°λ³Έκ°’                | `default` ν‚¤μ›λ“λ΅ μ§€μ • κ°€λ¥                                 |
| λ¦¬ν”λ ‰μ…              | `.isAnnotationPresent()`, `.getAnnotation()` λ“±μΌλ΅ μ •λ³΄ μ¶”μ¶ κ°€λ¥ |

## λ¦¬ν”λ ‰μ…μ„ ν†µν• μ• λ…Έν…μ΄μ… μ²λ¦¬

### β… 1. λ¦¬ν”λ ‰μ…μ΄λ€?

- **ν΄λμ¤μ κµ¬μ΅°(Class, Method, Field λ“±)**λ¥Ό **μ‹¤ν–‰ μ¤‘(run-time)μ— νƒμƒ‰ν•κ³  μ΅°μ‘**ν•  μ μκ² ν•΄μ£Όλ” Java API
- μ£Όλ΅ λ‹¤μμ— μ“°μ„:
  - μ‚¬μ©μ μ •μ μ• λ…Έν…μ΄μ… μ½κΈ°
  - λ™μ  κ°μ²΄ μƒμ„±, λ©”μ„λ“ μ‹¤ν–‰
  - ν”„λ μ„μ›ν¬ λ‚΄λ¶€ λ™μ‘ κµ¬ν„

```
Class<?> clazz = MyClass.class;          // ν΄λμ¤ λ©”νƒ€μ •λ³΄
Method[] methods = clazz.getDeclaredMethods(); // λ©”μ„λ“ λ©λ΅
Field[] fields = clazz.getDeclaredFields();    // ν•„λ“ λ©λ΅
```

------

### β… 2. μ• λ…Έν…μ΄μ… μ²λ¦¬ νλ¦„

#### [1] μ• λ…Έν…μ΄μ… μ •μ

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface MyAnnotation {
    String value();
}
```

#### [2] μ• λ…Έν…μ΄μ… μ‚¬μ©

```
public class MyService {
    @MyAnnotation("λ΅κ·Έ μ¶λ ¥μ©")
    public void serve() {
        System.out.println("μ„λΉ„μ¤ μν–‰ μ¤‘...");
    }
}
```

#### [3] λ¦¬ν”λ ‰μ… κΈ°λ° μ• λ…Έν…μ΄μ… μ½κΈ°

```
import java.lang.reflect.Method;

public class AnnotationProcessor {
    public static void main(String[] args) throws Exception {
        Class<?> clazz = MyService.class;

        for (Method method : clazz.getDeclaredMethods()) {
            if (method.isAnnotationPresent(MyAnnotation.class)) {
                MyAnnotation anno = method.getAnnotation(MyAnnotation.class);
                System.out.println("λ©”μ„λ“λ…: " + method.getName());
                System.out.println("μ• λ…Έν…μ΄μ… κ°’: " + anno.value());
                method.invoke(new MyService()); // λ™μ  νΈμ¶
            }
        }
    }
}
```

π§  μ¶λ ¥ μμ‹:

```
λ©”μ„λ“λ…: serve
μ• λ…Έν…μ΄μ… κ°’: λ΅κ·Έ μ¶λ ¥μ©
μ„λΉ„μ¤ μν–‰ μ¤‘...
```

------

### β… 3. λ‹¤μ–‘ν• λ€μƒλ³„ μ• λ…Έν…μ΄μ… νƒμƒ‰

| λ€μƒ   | λ©”μ„λ“                                                       |
| ------ | ------------------------------------------------------------ |
| ν΄λμ¤ | `clazz.isAnnotationPresent()`, `clazz.getAnnotation()`       |
| λ©”μ„λ“ | `method.isAnnotationPresent()`, `method.getAnnotation()`     |
| ν•„λ“   | `field.isAnnotationPresent()`, `field.getAnnotation()`       |
| μƒμ„±μ | `constructor.isAnnotationPresent()`, `constructor.getAnnotation()` |

------

#### π”Έ ν΄λμ¤μ— μ• λ…Έν…μ΄μ… λ¶™μ΄κ³  μ²λ¦¬ν•κΈ°

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface Entity {
    String table();
}

@Entity(table = "users")
public class User { ... }

// μ²λ¦¬
Entity entityAnno = User.class.getAnnotation(Entity.class);
System.out.println("DB ν…μ΄λΈ”λ…: " + entityAnno.table());
```

------

#### π”Έ ν•„λ“μ— μ• λ…Έν…μ΄μ… λ¶™μ΄κ³  μ²λ¦¬ν•κΈ°

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface Inject {}

public class MyController {
    @Inject
    private MyService service;
}

// μ²λ¦¬
Field[] fields = MyController.class.getDeclaredFields();
for (Field f : fields) {
    if (f.isAnnotationPresent(Inject.class)) {
        f.setAccessible(true); // private μ ‘κ·Ό κ°€λ¥
        f.set(controllerObj, new MyService());
    }
}
```

------

### β… 4. κ³ κΈ‰: λ¨λ“  μ• λ…Έν…μ΄μ… μ¶”μ¶ν•κΈ°

```
Annotation[] annotations = SomeClass.class.getAnnotations();
for (Annotation a : annotations) {
    System.out.println("μ• λ…Έν…μ΄μ… νƒ€μ…: " + a.annotationType().getName());
}
```

------

### β… 5. λ¦¬ν”λ ‰μ… κΈ°λ° μ»¤μ¤ν…€ ν”„λ μ„μ›ν¬ μμ‹

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
@interface RunOnStart {}

public class Boot {
    @RunOnStart
    public void init() {
        System.out.println("μ΄κΈ°ν™” μ‹¤ν–‰!");
    }
}

// ν”„λ μ„μ›ν¬ λ΅μ§
Class<?> c = Boot.class;
Object obj = c.getDeclaredConstructor().newInstance();
for (Method m : c.getDeclaredMethods()) {
    if (m.isAnnotationPresent(RunOnStart.class)) {
        m.invoke(obj);
    }
}
```

------

### π§  μ •λ¦¬ν‘

| λ¦¬ν”λ ‰μ… λ©”μ„λ“             | μ„¤λ…                      |
| --------------------------- | ------------------------- |
| `Class.forName(String)`     | ν΄λμ¤ λ™μ  λ΅λ”©          |
| `getDeclaredMethods()`      | λ¨λ“  λ©”μ„λ“ λ°ν™          |
| `isAnnotationPresent()`     | νΉμ • μ• λ…Έν…μ΄μ… μ΅΄μ¬ μ—¬λ¶€ |
| `getAnnotation(Class)`      | μ• λ…Έν…μ΄μ… κ°μ²΄ κ°€μ Έμ¤κΈ°  |
| `invoke(Object, Object...)` | λ©”μ„λ“ λ™μ  μ‹¤ν–‰          |
| `Field.setAccessible(true)` | private ν•„λ“ μ ‘κ·Ό ν—μ©    |

------

### β… μ‹¤λ¬΄ μ‘μ© μμ‹

| μ                                | μ„¤λ…                           |
| --------------------------------- | ------------------------------ |
| Spring `@Autowired`, `@Component` | ν•„λ“/ν΄λμ¤μ— λ¶™μ—¬μ„ Bean μ£Όμ… |
| JUnit `@Test`                     | ν…μ¤νΈ μ‹¤ν–‰ λ€μƒ ν‘μ‹          |
| JPA `@Entity`, `@Id`, `@Column`   | ORM λ§¤ν•‘ μ •λ³΄ ν‘μ‹             |
| Swagger `@ApiOperation`           | API λ¬Έμ„ μλ™ μƒμ„±             |